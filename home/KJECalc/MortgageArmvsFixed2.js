KJE.MortgageArmvsFixedCalc=function(){this.ARM=KJE.parameters.get("MSG_ARM","ARM Fully Amortizing");this.IO=KJE.parameters.get("MSG_ARM_IO","ARM Interest Only");this.FIXED=KJE.parameters.get("MSG_FIXED","Fixed Rate");this.NEG=KJE.parameters.get("MSG_FIXED","Option ARM");this.FIVE_YEAR_TERM=KJE.parameters.get("ARM_FIVE_YEAR_TERM",4);this.MSG_FIVE=KJE.parameters.get("MSG_FIVE","Four");this.MSG_FIVE_YEAR_TOTALS=KJE.parameters.get("MSG_ARM_FIVE_YEAR_TOTALS","Four year totals");this.MSG_FIVE_YEAR_PAYMENT=KJE.parameters.get("MSG_FIVE_YEAR_PAYMENT","Payment after four years");this.cats=[KJE.parameters.get("MSG_ARM_GRAPH_CAT1","One Year"),KJE.parameters.get("MSG_ARM_GRAPH_CAT2","Four Years")];this.MSG_YEAR_NUMBER=KJE.parameters.get("MSG_YEAR_NUMBER","Year Number");this.MSG_PRINCIPAL=KJE.parameters.get("MSG_PRINCIPAL","Principal");this.MSG_INTEREST=KJE.parameters.get("MSG_INTEREST","Interest");this.MSG_PAYMENT_NUMBER=KJE.parameters.get("MSG_PAYMENT_NUMBER","Payment Number");this.MSG_PRINCIPAL_BALANCE=KJE.parameters.get("MSG_PRINCIPAL_BALANCE","Principal Balance");this.MSG_NORMAL_PAYMENTS=KJE.parameters.get("MSG_NORMAL_PAYMENTS","Normal payments");this.BREAK_EVEN_NOTE=["With your current assumptions, your total payments after ADJUST_YEARS for the ARM will be ADJUST_DIFFERENCE less than the fixed rate mortgage. In this case you may be better off with an ARM.","With your current assumptions, your total payments with an ARM are lower through ADJUST_YEARS of payments. If you expect to sell your home or refinance before ADJUST_YEARS, you may be better off with an ARM.","With your current assumptions, your ARM payments are never less than a fixed rate mortgage. In this case you may be better off with an fixed rate mortgage."];this.BREAK_EVEN_NOTE[0]=KJE.parameters.get("MSG_BREAK_EVEN_NOTE1",this.BREAK_EVEN_NOTE[0]);this.BREAK_EVEN_NOTE[1]=KJE.parameters.get("MSG_BREAK_EVEN_NOTE2",this.BREAK_EVEN_NOTE[1]);this.BREAK_EVEN_NOTE[2]=KJE.parameters.get("MSG_BREAK_EVEN_NOTE3",this.BREAK_EVEN_NOTE[2]);this.SHOW_PI_ARM=KJE.parameters.get("SHOW_PI_ARM",true);this.SHOW_INTEREST_ONLY=KJE.parameters.get("SHOW_INTEREST_ONLY",true);this.SHOW_FIXED=KJE.parameters.get("SHOW_FIXED",true);this.SHOW_NEG=KJE.parameters.get("SHOW_NEG",false);this.NEG_AM_FIXED=3;this.NEG_AM_MAX_INCREASE=7.5;this.INTEREST_ONLY=new Array(4);this.LOAN_TYPE=new Array(4);this.ADJUSTABLE_RATE=new Array(4);this.NEG_AM=new Array(4);this.INTEREST_RATE=KJE.FloatArray(4);this.INTEREST_RATE2=KJE.FloatArray(4);this.PREPAYMENT=KJE.FloatArray(4);this.PAYOFF=KJE.FloatArray(4);this.ADJUSTABLE_RATE_CAP=KJE.FloatArray(4);this.ADJUSTABLE_RATE_INCR=KJE.FloatArray(4);this.ADJUSTABLE_RATE_FEQ=KJE.FloatArray(4);this.ADJUSTABLE_MONTHS_FIXED=KJE.FloatArray(4);this.MONTHLY_PI=KJE.FloatArray(4);this.MONTH_INTEREST=KJE.FloatArray(4);this.MONTH_PRINCIPAL=KJE.FloatArray(4);this.FIRST_YEAR_INTEREST=KJE.FloatArray(4);this.FIRST_YEAR_PRINCIPAL=KJE.FloatArray(4);this.FIRST_YEAR_TOTAL=KJE.FloatArray(4);this.FIVE_YEAR_INTEREST=KJE.FloatArray(4);this.FIVE_YEAR_PRINCIPAL=KJE.FloatArray(4);this.FIVE_YEAR_TOTAL=KJE.FloatArray(4);this.TERM_YEAR_TOTAL=KJE.FloatArray(4);this.FIVE_YEAR_PAYMENT=KJE.FloatArray(4);this.TERM_LIST=KJE.FloatArray(4);this.TOTAL_INTEREST=KJE.FloatArray(4);this.TOTAL_PAYMENTS=KJE.FloatArray(4);this.ENDING_BALANCE=KJE.FloatArray(4);this.HIGHEST_RATE=KJE.FloatArray(4);this.ADJUST_YEARS="";this.ADJUST_DIFFERENCE=0;this.BY_YEAR=true;this.SAVINGS_IO_FIRST_YEAR=0;this.SAVINGS_IO_FIVE_YEAR=0;this.SAVINGS_IO_TERM_YEAR=0;this.SAVINGS_ARM_FIRST_YEAR=0;this.SAVINGS_ARM_FIVE_YEAR=0;this.SAVINGS_ARM_TERM_YEAR=0;this.SAVINGS_NEG_FIRST_YEAR=0;this.SAVINGS_NEG_FIVE_YEAR=0;this.SAVINGS_NEG_TERM_YEAR=0;this.PRINCIPAL1_ARM_VS_FIXED=0;this.PRINCIPAL2_ARM_VS_FIXED=0;this.INTEREST1_ARM_VS_FIXED=0;this.INTEREST2_ARM_VS_FIXED=0;this.INTEREST2_NEG_VS_FIXED=0;this.SAVINGS_IO_MONTH=0;this.SAVINGS_ARM_MONTH=0;this.SAVINGS_NEG_MONTH=0;this.nBalance=KJE.FloatArray(4);this.nInterest=KJE.FloatArray(4);this.nPrincipal=KJE.FloatArray(4);this.nYrInterest=KJE.FloatArray(4);this.nYrPrincipal=KJE.FloatArray(4);this.nYrPayment=KJE.FloatArray(4);this.nPayment=KJE.FloatArray(4);this.nInterestRate=KJE.FloatArray(this.MONTHLY_PI.length);this.nNewInterestRate=KJE.FloatArray(this.MONTHLY_PI.length);var b=(this.SHOW_INTEREST_ONLY&&this.SHOW_PI_ARM&&this.SHOW_FIXED&&this.SHOW_NEG?4:(this.SHOW_INTEREST_ONLY&&this.SHOW_PI_ARM&&this.SHOW_FIXED?3:2));this.DS_PAYMENTS=new Array(b);this.DS_PAYMENT_TOTALS=new Array(b);for(var a=0;a<b;a++){this.DS_PAYMENTS[a]=KJE.FloatArray(2);this.DS_PAYMENT_TOTALS[a]=KJE.FloatArray(2)}this.sSchedule=new KJE.Repeating()};KJE.MortgageArmvsFixedCalc.prototype.clear=function(){this.TERM=0;this.LOAN_AMOUNT=0;var a=this.TERM_LIST.length;for(var b=0;b<a;b++){this.TERM_LIST[b]=0}};KJE.MortgageArmvsFixedCalc.prototype.calculate=function(M){var h=KJE;var W=this.TERM;var q=this.LOAN_AMOUNT;var V=this.TERM_LIST;var aa=this.nBalance;var u=this.nInterest;var k=this.nPrincipal;var E=this.nYrInterest;var f=this.nYrPrincipal;var I=this.nYrPayment;var G=this.nPayment;var S=this.nInterestRate;var m=this.nNewInterestRate;var Y=this.FIRST_YEAR_INTEREST;var D=this.FIRST_YEAR_PRINCIPAL;var z=this.FIRST_YEAR_TOTAL;var Q=this.FIVE_YEAR_INTEREST;var H=this.FIVE_YEAR_PRINCIPAL;var U=this.FIVE_YEAR_TOTAL;var w=this.FIVE_YEAR_PAYMENT;var c=this.TERM_YEAR_TOTAL;var C=this.TOTAL_INTEREST;var P=this.TOTAL_PAYMENTS;var t=this.ENDING_BALANCE;var b=this.HIGHEST_RATE;var g=this.INTEREST_RATE;var L=this.INTEREST_ONLY;var Z=this.MONTHLY_PI;var J=this.MONTH_INTEREST;var j=this.MONTH_PRINCIPAL;var r=this.LOAN_TYPE;var s=this.ADJUSTABLE_RATE;var y=this.NEG_AM;var X=this.INTEREST_RATE2;var B=this.PREPAYMENT;var p=this.PAYOFF;var F=this.ADJUSTABLE_RATE_CAP;var e=this.ADJUSTABLE_RATE_INCR;var a=this.ADJUSTABLE_RATE_FEQ;var l=this.ADJUSTABLE_MONTHS_FIXED;var o=this.FIVE_YEAR_TERM;var R=o*12;if(o==-1){o=Math.floor(l[1]/12);if(o<2){o=2}R=o*12;this.MSG_FIVE=KJE.MortgageArmvsFixedCalc.getNumberLabel(o,true);this.MSG_FIVE_YEAR_TOTALS=KJE.MortgageArmvsFixedCalc.getNumberLabel(o,false)+" year totals";this.MSG_FIVE_YEAR_PAYMENT="Payment after "+KJE.MortgageArmvsFixedCalc.getNumberLabel(o,true)+" years";this.cats[1]=KJE.MortgageArmvsFixedCalc.getNumberLabel(o,false)+" Years"}var d=0;for(var T=0;T<V.length;T++){if(V[T]==0){V[T]=W}if(V[T]*12>d){d=V[T]*12}}var v=this.MONTHLY_PI.length;for(var T=0;T<v;T++){S[T]=g[T]/1200;m[T]=g[T]/100;aa[T]=q;k[T]=0;u[T]=0;E[T]=0;f[T]=0;I[T]=0;Y[T]=0;D[T]=0;z[T]=0;Q[T]=0;H[T]=0;U[T]=0;w[T]=0;c[T]=0;C[T]=0;P[T]=0;t[T]=0;b[T]=S[T];if(L[T]){Z[T]=h.round((S[T]*q),2)}else{Z[T]=h.round(KJE.PMT(S[T],V[T]*12,q),2)}J[T]=h.round((S[T]*q),2);j[T]=Z[T]-J[T];G[T]=Z[T]}if(M){var A=this.sSchedule;A.clearRepeat();if(this.BY_YEAR){this.addRegularTitle(A,A.sReportCol("Year",7),A.sReportCol("Payments",1),A.sReportCol("Balance",2),A.sReportCol("Interest Only ARM",4),A.sReportCol(this.ARM,5),A.sReportCol("Fixed Rate Mortgage",6),A.sReportCol("Negative Amortization Mortgage",7))}else{this.addRegularTitle(A,A.sReportCol("#",8),A.sReportCol("Payment",3),A.sReportCol("Balance",2),A.sReportCol("Interest Only ARM",4),A.sReportCol(this.ARM,5),A.sReportCol("Fixed Rate Mortgage",6),A.sReportCol("Negative Amortization Mortgage",7))}this.addRegularRow(A,"&nbsp;",null,q,null,q,null,q)}var x=null;var O=(d);for(var N=1;N<=O;N++){for(var T=0;T<v;T++){if(y[T]&&(this.NEG_AM_FIXED+1)==N){S[T]=X[T]/1200;m[T]=X[T]/100}if(((N-l[T])%(a[T]==0?1:a[T]))==1&&N!=1&&s[T]&&N!=V[T]*12&&(e[T]!=0||y[T])&&l[T]<=N){m[T]=m[T]+e[T]/100;if(m[T]>F[T]/100){m[T]=F[T]/100}if(m[T]<0.02){m[T]=0.02}S[T]=m[T]/12;if(L[T]){G[T]=h.round((S[T]*aa[T]),2)}else{if(y[T]){var ab=G[T];G[T]=h.round(KJE.PMT(S[T],V[T]*12-N+1,aa[T]),2);if(N<61){if(G[T]>(ab*(1+(this.NEG_AM_MAX_INCREASE/100)))){G[T]=h.round(ab*(1+(this.NEG_AM_MAX_INCREASE/100)),2)}else{if(G[T]<(ab*(1-(this.NEG_AM_MAX_INCREASE/100)))){G[T]=h.round(ab*(1-(this.NEG_AM_MAX_INCREASE/100)),2)}}}}else{G[T]=h.round(KJE.PMT(S[T],V[T]*12-N+1,aa[T]),2)}}if(b[T]<S[T]){b[T]=S[T]}}u[T]=h.round(S[T]*aa[T],2);if(L[T]){if(aa[T]>0){if(B[T]>aa[T]){G[T]=aa[T]+u[T];aa[T]=0;k[T]=aa[T];p[T]=N}else{G[T]=u[T]+B[T];aa[T]-=B[T];k[T]=B[T]}}else{G[T]=0;u[T]=0;k[T]=0}}else{k[T]=G[T]-u[T];aa[T]-=k[T];if(aa[T]==0){G[T]=0;k[T]=0;u[T]=0}else{if(aa[T]<0||(aa[T]>0.005&&O==N)){k[T]+=aa[T];aa[T]=0;G[T]=k[T]+u[T]}else{if(O==N){aa[T]=0}}}}E[T]+=u[T];f[T]+=k[T];I[T]+=G[T];P[T]+=G[T];C[T]+=u[T];c[T]+=G[T];if((N%12)==0){if(N==12){Y[T]=E[T];D[T]=f[T];z[T]=I[T]}}if(N>0&&N<=R){}if(N==R){w[T]=G[T];Q[T]+=C[T];U[T]+=P[T];H[T]+=U[T]-Q[T]}}if(M){if(!this.BY_YEAR){this.addRegularRow(A,h.number(N),(this.SHOW_NEG?G[3]:G[2]),(this.SHOW_NEG?aa[3]:aa[2]),G[1],aa[1],G[0],aa[0])}else{if(this.BY_YEAR&&(N%12)==0){this.addRegularRow(A,h.number(N/12),(this.SHOW_NEG?I[3]:I[2]),(this.SHOW_NEG?aa[3]:aa[2]),I[1],aa[1],I[0],aa[0])}}}if((N%12)==0){for(var T=0;T<E.length;T++){E[T]=0;f[T]=0;I[T]=0}}if(x==null&&(P[0]<=P[1])){x=N}}this.SAVINGS_IO_FIRST_YEAR=z[0]-z[2];this.SAVINGS_IO_FIVE_YEAR=U[0]-U[2];this.SAVINGS_IO_TERM_YEAR=c[0]-c[2];this.SAVINGS_ARM_FIRST_YEAR=z[0]-z[1];this.SAVINGS_ARM_FIVE_YEAR=U[0]-U[1];this.SAVINGS_ARM_TERM_YEAR=c[0]-c[1];if(this.SHOW_NEG){this.SAVINGS_NEG_FIRST_YEAR=z[0]-z[3];this.SAVINGS_NEG_FIVE_YEAR=U[0]-U[3];this.SAVINGS_NEG_TERM_YEAR=c[0]-c[3]}this.INTEREST1_ARM_VS_FIXED=Y[0]-Y[1];this.INTEREST2_ARM_VS_FIXED=Q[0]-Q[1];this.PRINCIPAL1_ARM_VS_FIXED=D[1]-D[0];this.PRINCIPAL2_ARM_VS_FIXED=H[1]-H[0];this.SAVINGS_IO_MONTH=Z[0]+B[0]-Z[2]-B[2];this.SAVINGS_ARM_MONTH=Z[0]+B[0]-Z[1]-B[1];if(this.SHOW_NEG){this.SAVINGS_NEG_MONTH=Z[0]+B[0]-Z[3]-B[3]}var N=0;var K=U.length;for(var T=0;T<K;T++){t[T]=aa[T];if((this.SHOW_FIXED&&T==0)||(this.SHOW_PI_ARM&&T==1)||(this.SHOW_INTEREST_ONLY&&T==2)||(this.SHOW_NEG&&T==3)){this.DS_PAYMENT_TOTALS[N][0]=z[T];this.DS_PAYMENT_TOTALS[N][1]=U[T];this.DS_PAYMENTS[N][0]=((Z[T]+B[T]));this.DS_PAYMENTS[N][1]=(w[T]);N++}}this.ADJUST_DIFFERENCE=P[0]-P[1];this.ADJUST_YEARS=KJE.getTermLabel(x);this.nBreakLength=x};KJE.MortgageArmvsFixedCalc.prototype.formatReport=function(c){var d=KJE;var a=this.iDecimal;var e=c;for(var b=0;b<this.TERM_LIST.length;b++){e=KJE.replace("TERM_LIST"+(b+1),d.number(this.TERM_LIST[b]),e)}e=KJE.replace("MSG_FIVE_YEAR_TOTALS",this.MSG_FIVE_YEAR_TOTALS,e);e=KJE.replace("MSG_FIVE_YEAR_PAYMENT",this.MSG_FIVE_YEAR_PAYMENT,e);for(var b=0;b<this.MONTHLY_PI.length-(this.SHOW_NEG?0:1);b++){e=KJE.replace("MONTHLY_PI"+b,d.dollars(this.MONTHLY_PI[b]+this.PREPAYMENT[b],2),e);e=KJE.replace("INTEREST_RATE"+b,d.percent(this.INTEREST_RATE[b]/100,3),e);e=KJE.replace("ADJUSTABLE_RATE_FEQ"+b,d.number(this.ADJUSTABLE_RATE_FEQ[b]),e);e=KJE.replace("ADJUSTABLE_RATE_INCR"+b,d.percent(this.ADJUSTABLE_RATE_INCR[b]/100,2),e);e=KJE.replace("ADJUSTABLE_RATE_CAP"+b,d.percent(this.ADJUSTABLE_RATE_CAP[b]/100,3),e);e=KJE.replace("ADJUSTABLE_RATE"+b,d.yesno(this.ADJUSTABLE_RATE[b]),e);e=KJE.replace("INTEREST_ONLY"+b,d.yesno(this.INTEREST_ONLY[b]),e);e=KJE.replace("LOAN_TYPE"+b,this.LOAN_TYPE[b],e);e=KJE.replace("ADJUSTABLE_MONTHS_FIXED"+b,d.number(this.ADJUSTABLE_MONTHS_FIXED[b]),e);e=KJE.replace("PREPAYMENT"+b,d.dollars(this.PREPAYMENT[b]),e);e=KJE.replace("MONTH_INTEREST"+b,d.dollars(this.MONTH_INTEREST[b],2),e);e=KJE.replace("MONTH_PRINCIPAL"+b,d.dollars(this.MONTH_PRINCIPAL[b],2),e);e=KJE.replace("FIRST_YEAR_INTEREST"+b,d.dollars(this.FIRST_YEAR_INTEREST[b],2),e);e=KJE.replace("FIRST_YEAR_PRINCIPAL"+b,d.dollars(this.FIRST_YEAR_PRINCIPAL[b],2),e);e=KJE.replace("FIRST_YEAR_TOTAL"+b,d.dollars(this.FIRST_YEAR_TOTAL[b],2),e);e=KJE.replace("FIVE_YEAR_INTEREST"+b,d.dollars(this.FIVE_YEAR_INTEREST[b],2),e);e=KJE.replace("FIVE_YEAR_PRINCIPAL"+b,d.dollars(this.FIVE_YEAR_PRINCIPAL[b],2),e);e=KJE.replace("FIVE_YEAR_TOTAL"+b,d.dollars(this.FIVE_YEAR_TOTAL[b],2),e);e=KJE.replace("FIVE_YEAR_PAYMENT"+b,d.dollars(this.FIVE_YEAR_PAYMENT[b],2),e);e=KJE.replace("TOTAL_INTEREST"+b,d.dollars(this.TOTAL_INTEREST[b],2),e);e=KJE.replace("TOTAL_PAYMENTS"+b,d.dollars(this.TOTAL_PAYMENTS[b],2),e);e=KJE.replace("ENDING_BALANCE"+b,d.dollars(this.ENDING_BALANCE[b],2),e);e=KJE.replace("HIGHEST_RATE"+b,d.percent(this.HIGHEST_RATE[b]*12,3),e);e=KJE.replace("MSG_PAYOFF"+b,(this.PAYOFF[b]>0?KJE.getTermLabel(this.PAYOFF[b],true):d.number(this.TERM_LIST[b])+" "+this.MSG_YEARS_LBL),e);e=KJE.replace("MSG_FINAL_PAYOFF"+b,d.dollars(this.ENDING_BALANCE[b])+" after "+(this.PAYOFF[b]>0?KJE.getTermLabel(this.PAYOFF[b],true):d.number(this.TERM)+" "+this.MSG_YEARS_LBL),e)}e=KJE.replace("LOAN_AMOUNT",d.dollars(this.LOAN_AMOUNT,2),e);e=KJE.replace("SAVINGS_IO_FIRST_YEAR",d.dollars(this.SAVINGS_IO_FIRST_YEAR,2),e);e=KJE.replace("SAVINGS_IO_FIVE_YEAR",d.dollars(this.SAVINGS_IO_FIVE_YEAR,2),e);e=KJE.replace("SAVINGS_IO_TERM_YEAR",d.dollars(this.SAVINGS_IO_TERM_YEAR,2),e);e=KJE.replace("SAVINGS_ARM_FIRST_YEAR",d.dollars(this.SAVINGS_ARM_FIRST_YEAR,2),e);e=KJE.replace("SAVINGS_ARM_FIVE_YEAR",d.dollars(this.SAVINGS_ARM_FIVE_YEAR,2),e);e=KJE.replace("SAVINGS_ARM_TERM_YEAR",d.dollars(this.SAVINGS_ARM_TERM_YEAR,2),e);e=KJE.replace("SAVINGS_NEG_FIRST_YEAR",d.dollars(this.SAVINGS_NEG_FIRST_YEAR,2),e);e=KJE.replace("SAVINGS_NEG_FIVE_YEAR",d.dollars(this.SAVINGS_NEG_FIVE_YEAR,2),e);e=KJE.replace("SAVINGS_NEG_TERM_YEAR",d.dollars(this.SAVINGS_NEG_TERM_YEAR,2),e);e=KJE.replace("PRINCIPAL1_ARM_VS_FIXED",d.dollars(this.PRINCIPAL2_ARM_VS_FIXED,2),e);e=KJE.replace("PRINCIPAL2_ARM_VS_FIXED",d.dollars(this.PRINCIPAL2_ARM_VS_FIXED,2),e);e=KJE.replace("INTEREST1_ARM_VS_FIXED",d.dollars(this.INTEREST1_ARM_VS_FIXED,2),e);e=KJE.replace("INTEREST2_ARM_VS_FIXED",d.dollars(this.INTEREST2_ARM_VS_FIXED,2),e);e=KJE.replace("BREAK_EVEN_NOTE",(this.ADJUST_DIFFERENCE>0?this.BREAK_EVEN_NOTE[0]:(this.nBreakLength>1?this.BREAK_EVEN_NOTE[1]:this.BREAK_EVEN_NOTE[2])),e);e=KJE.replace("SAVINGS_IO_MONTH",d.dollars(this.SAVINGS_IO_MONTH,2),e);e=KJE.replace("SAVINGS_ARM_MONTH",d.dollars(this.SAVINGS_ARM_MONTH,2),e);e=KJE.replace("SAVINGS_NEG_MONTH",d.dollars(this.SAVINGS_NEG_MONTH,2),e);e=KJE.replace("ADJUST_DIFFERENCE",d.dollars(this.ADJUST_DIFFERENCE,2),e);e=KJE.replace("ADJUST_YEARS",this.ADJUST_YEARS,e);e=KJE.replace("TERM",d.number(this.TERM),e);e=KJE.replace("NEG_AM_FIXED",d.number(this.NEG_AM_FIXED),e);e=KJE.replace("NEG_AM_MAX_INCREASE",d.percent(this.NEG_AM_MAX_INCREASE/100,2),e);e=KJE.replace("NEG_AM_NON_TEASER",d.percent(this.INTEREST_RATE2[3]/100,3),e);e=KJE.replace("MSG_FIVE_LOWER",this.MSG_FIVE.toLowerCase(),e);e=KJE.replace("MSG_FIVE",this.MSG_FIVE,e);e=e.replace("**REPEATING GROUP**",this.sSchedule.getRepeat());this.sSchedule.clearRepeat();return e};KJE.MortgageArmvsFixedCalc.prototype.addRegularTitle=function(a,j,h,g,f,e,d,c){var k=new Array(4);var b=0;k[b++]=j;if(this.SHOW_FIXED){k[b++]={sCell:KJE._sHeadingUnderline,sContent:d,sFormat:"COLSPAN=2"}}if(this.SHOW_PI_ARM&&!this.SHOW_NEG){k[b++]={sCell:KJE._sHeadingUnderline,sContent:e,sFormat:"COLSPAN=2"}}if(this.SHOW_INTEREST_ONLY&&!this.SHOW_NEG){k[b++]={sCell:KJE._sHeadingUnderline,sContent:f,sFormat:"COLSPAN=2"}}if(this.SHOW_NEG){k[b]={sCell:KJE._sHeadingUnderline,sContent:c,sFormat:"COLSPAN=2"}}a.addHeader("&nbsp;",k[1],k[2],k[3]);k=new Array(7);b=0;k[b++]=j;if(this.SHOW_FIXED){k[b++]=h;k[b++]=g}if(this.SHOW_PI_ARM&&!this.SHOW_NEG){k[b++]=h;k[b++]=g}if(this.SHOW_INTEREST_ONLY||this.SHOW_NEG){k[b++]=h;k[b]=g}a.addHeader(k[0],k[1],k[2],k[3],k[4],k[5],k[6],k[7])};KJE.MortgageArmvsFixedCalc.prototype.addRegularRow=function(b,a,j,f,h,e,g,d){var k=new Array(7);var c=0;k[c++]=a;if(this.SHOW_FIXED){k[c++]=(g?KJE.dollars(g,2):"&nbsp;");k[c++]=KJE.dollars(d,2)}if(this.SHOW_PI_ARM&&!this.SHOW_NEG){k[c++]=(g?KJE.dollars(h,2):"&nbsp;");k[c++]=KJE.dollars(e,2)}if(this.SHOW_INTEREST_ONLY||this.SHOW_NEG){k[c++]=(g?KJE.dollars(j,2):"&nbsp;");k[c]=KJE.dollars(f,2)}b.addRepeat(k[0],k[1],k[2],k[3],k[4],k[5],k[6],k[7])};KJE.MortgageArmvsFixedCalc.getNumberLabel=function(b,a){var c=(b==0?"":(b<=KJE.Default.sNumbers.length?KJE.Default.sNumbers[b-1]:KJE.number(b)));if(a){c=c.toLowerCase()}return c};KJE.Default.sNumbers=["One","Two","Three","Four","Five","Six","Seven","Eight","Nine"];KJE.CalcName="ARM vs. Fixed-Rate Mortgage";KJE.CalcType="MortgageArmvsFixed2";KJE.CalculatorTitle="ARM vs. Fixed Rate Mortgage";KJE.parseInputs=function(a){a=KJE.replace("**TERM**",KJE.getMortgageTermDrop("TERM",30),a);return a};KJE.initialize=function(){KJE.CalcControl=new KJE.MortgageArmvsFixedCalc();KJE.GuiControl=new KJE.MortgageArmvsFixed(KJE.CalcControl)};KJE.MortgageArmvsFixed=function(p){var g=KJE;var c=KJE.gLegend;var j=KJE.inputs.items;this.ARM_ADJUST_ANNUALLY=KJE.parameters.get("ARM_ADJUST_ANNUALLY",true);this.ARM_ADJUST_AT_MONTHS_FIXED=KJE.parameters.get("ARM_ADJUST_AT_MONTHS_FIXED",false);this.SHOW_ARM_FIELDS=KJE.parameters.get("SHOW_ARM_FIELDS",true);this.SHOW_PREPAYMENT=KJE.parameters.get("SHOW_PREPAYMENT",false);p.ADJUSTABLE_RATE[0]=false;p.INTEREST_ONLY[0]=false;p.LOAN_TYPE[0]=p.FIXED;p.ADJUSTABLE_RATE[1]=true;p.INTEREST_ONLY[1]=false;p.LOAN_TYPE[1]=p.ARM;p.ADJUSTABLE_RATE[2]=true;p.INTEREST_ONLY[2]=true;p.LOAN_TYPE[2]=p.IO;KJE.parameters.getSet("MSG_INTEREST_RATE1","Interest rate");for(var n=0;n<3;n++){KJE.InputItem.AltHelpName="INTEREST_RATE";KJE.PercentSlider("INTEREST_RATE"+(n+1),"Initial interest rate",1,25,3);if(p.ADJUSTABLE_RATE[n]){KJE.InputItem.AltHelpName="ADJUSTABLE_RATE_CAP";KJE.PercentSlider("ADJUSTABLE_RATE_CAP"+(n+1),"Interest rate cap",5,25,3);KJE.InputItem.AltHelpName="ADJUSTABLE_RATE_INCR";KJE.PercentSlider("ADJUSTABLE_RATE_INCR"+(n+1),"Expected Adjustment",-3,3,2);KJE.InputItem.AltHelpName="ADJUSTABLE_RATE_FEQ";KJE.NumberSlider("ADJUSTABLE_RATE_FEQ"+(n+1),"Adjustment frequency",1,12,0);if(this.ARM_ADJUST_ANNUALLY||this.ARM_ADJUST_AT_MONTHS_FIXED){j["ADJUSTABLE_RATE_FEQ"+(n+1)].hide()}KJE.InputItem.AltHelpName="ADJUSTABLE_MONTHS_FIXED";KJE.NumberSlider("ADJUSTABLE_MONTHS_FIXED"+(n+1),"Months rate fixed",1,360,0)}if(n>0&&this.SHOW_PREPAYMENT){KJE.InputItem.AltHelpName="PREPAYMENT";KJE.DollarSlider("PREPAYMENT"+(n+1),"Prepayment",0,50000,0,0,7)}}KJE.InputItem.AltHelpName=null;KJE.MortgageAmtSlider("LOAN_AMOUNT","Mortgage amount");KJE.MortgageTermDropBoxSlider("TERM","Term in years");KJE.Radioboxes("BY_YEAR","Report amortization",true,"Annually","Monthly");var k=KJE.gNewGraph(KJE.gCOLUMN,"GRAPH1",true,false,KJE.colorList[1],KJE.parameters.get("MSG_GRAPH_TITLE1","Monthly Payment by Mortgage Type"));k._showItemLabel=true;k._legend._iOrientation=c.TOP_RIGHT;var b=KJE.parameters.get("MSG_DROPPER_TITLE","Fixed Rate Mortgage:");var e=KJE.parameters.get("MSG_DROPPER_CLOSETITLE","Monthly payment KJE1");var f=function(){return b+"|"+KJE.subText(KJE.getKJEReplaced(e,g.dollars(p.MONTHLY_PI[0],2)),"KJERightBold")};KJE.addDropper(new KJE.Dropper("INPUTS",true,f,f),KJE.colorList[0]);if(KJE.parameters.get("SHOW_THREE_LOANS",true)){var q=KJE.parameters.get("MSG_DROPPER2_TITLE","Fully Amortizing ARM:");var h=KJE.parameters.get("MSG_DROPPER2_CLOSETITLE","Initial payment KJE1");var o=function(){return q+"|"+KJE.subText(KJE.getKJEReplaced(h,g.dollars(p.MONTHLY_PI[1],2)),"KJERightBold")};KJE.addDropper(new KJE.Dropper("INPUTS2",false,o,o),KJE.colorList[0])}if(p.SHOW_INTEREST_ONLY){var a=KJE.parameters.get("MSG_DROPPER3_TITLE","Interest only ARM:");var d=KJE.parameters.get("MSG_DROPPER3_CLOSETITLE","Initial payment KJE1");var m=function(){return a+"|"+KJE.subText(KJE.getKJEReplaced(d,g.dollars(p.MONTHLY_PI[2]+p.PREPAYMENT[2],2)),"KJERightBold")};KJE.addDropper(new KJE.Dropper("INPUTS3",false,m,m),KJE.colorList[0])}};KJE.MortgageArmvsFixed.prototype.setValues=function(c){var a=KJE.inputs.items;for(var b=0;b<3;b++){c.INTEREST_RATE[b]=a["INTEREST_RATE"+(b+1)].getValue();if(c.ADJUSTABLE_RATE[b]){c.ADJUSTABLE_RATE_CAP[b]=a["ADJUSTABLE_RATE_CAP"+(b+1)].getValue();c.ADJUSTABLE_RATE_INCR[b]=a["ADJUSTABLE_RATE_INCR"+(b+1)].getValue();c.ADJUSTABLE_MONTHS_FIXED[b]=a["ADJUSTABLE_MONTHS_FIXED"+(b+1)].getValue();if(this.ARM_ADJUST_AT_MONTHS_FIXED){c.ADJUSTABLE_RATE_FEQ[b]=c.ADJUSTABLE_MONTHS_FIXED[b]}else{if(this.ARM_ADJUST_ANNUALLY){c.ADJUSTABLE_RATE_FEQ[b]=12}else{c.ADJUSTABLE_RATE_FEQ[b]=a["ADJUSTABLE_RATE_FEQ"+(b+1)].getValue()}}if(b>0&&this.SHOW_PREPAYMENT){c.PREPAYMENT[b]=a["PREPAYMENT"+(b+1)].getValue()}}}c.TERM=Math.round(a.TERM.getValue());c.LOAN_AMOUNT=a.LOAN_AMOUNT.getValue();c.BY_YEAR=a.BY_YEAR.getValue()};KJE.MortgageArmvsFixed.prototype.refresh=function(e){var d=KJE;var b=KJE.inputs.items;var a=KJE.gGraphs[0];a.removeAll();a.setGraphCategories(e.cats);for(var c=0;c<e.DS_PAYMENTS.length;c++){a.add(new KJE.gGraphDataSeries(e.DS_PAYMENTS[c],e.LOAN_TYPE[c],a.getColor(c+1)))}a.paint()};KJE.InputScreenText=" <div id=KJE-D-INPUTS><div id=KJE-P-INPUTS>Input information:</div></div> <div id=KJE-E-INPUTS > <div id='KJE-C-LOAN_AMOUNT'><input id='KJE-LOAN_AMOUNT' /></div> <div id='KJE-C-TERM'>**TERM**</div> <div id='KJE-C-INTEREST_RATE1'><input id='KJE-INTEREST_RATE1' /></div> <div id='KJE-C-BY_YEAR'><fieldset id='KJE-FS-BY_YEAR'><input id='KJE-BY_YEAR1' type=radio name=BY_YEAR /><input id='KJE-BY_YEAR2' type=radio name=BY_YEAR /></fieldset></div> <div style='height:10px'></div> </div> <div id=KJE-D-INPUTS2><div id=KJE-P-INPUTS2>Input information:</div></div> <div id=KJE-E-INPUTS2 > <div id='KJE-C-INTEREST_RATE2'><input id='KJE-INTEREST_RATE2' /></div> <div id='KJE-C-ADJUSTABLE_MONTHS_FIXED2'><input id='KJE-ADJUSTABLE_MONTHS_FIXED2' /></div> <div id='KJE-C-ADJUSTABLE_RATE_FEQ2'><input id='KJE-ADJUSTABLE_RATE_FEQ2' /></div> <div id='KJE-C-ADJUSTABLE_RATE_INCR2'><input id='KJE-ADJUSTABLE_RATE_INCR2' /></div> <div id='KJE-C-ADJUSTABLE_RATE_CAP2'><input id='KJE-ADJUSTABLE_RATE_CAP2' /></div> <div style='height:10px'></div> </div> **GRAPH1** ";KJE.DefinitionText=' <div id="KJE-D-FIXED_RATE_MORTGAGE"><dt>Fixed Rate Mortgage</dt><dd>A fixed-rate mortgage has the same interest rate and monthly payment throughout the term of the mortgage.</dd></div> <div id="KJE-D-ARM"><dt>Fully Amortizing ARM</dt><dd>This calculator shows a "fully amortizing" ARM, which is the most common type of ARM. The monthly payment is calculated to pay off the entire mortgage balance at the end of a 30-year term. After the initial period, the interest rate and monthly payment adjust at the frequency specified. The amount an ARM can adjust each year, and over the life of the loan, are typically capped. Below is a list of common ARMs.</p> <div class=KJEReportTableDiv><table class=KJEReportTable><caption class=\'KJEHeaderRow KJEHeading\'>Common Adjustable Rate Mortgages</caption> <thead class="KJEReportTHeader"> <tr class="KJEHeaderRow"><th class="KJEHeading KJECell40" scope="col">ARM Type</th><th class="KJEHeading KJECell60" scope="col">Months Fixed</th></tr> </thead> <tbody class="KJEReportTBody"> <tr class="KJEEvenRow"><th class="KJECellBorder KJELabel" scope="row">10/1 ARM</th><td class="KJECell KJELeft">Fixed for 120 months, adjusts annually for the remaining term of the loan.</td></tr> <tr class="KJEOddRow"><th class="KJECellBorder KJELabel" scope="row">7/1 ARM</th><td class="KJECell KJELeft">Fixed for 84 months, adjusts annually for the remaining term of the loan.</td></tr> <tr class="KJEEvenRow"><th class="KJECellBorder KJELabel" scope="row">5/1 ARM</th><td class="KJECell KJELeft">Fixed for 60 months, adjusts annually for the remaining term of the loan.</td></tr> <tr class="KJEOddRow"><th class="KJECellBorder KJELabel" scope="row">3/1 ARM</th><td class="KJECell KJELeft">Fixed for 36 months, adjusts annually for the remaining term of the loan.</td></tr> </tbody> </table></div> </dd> </div> <div id=\'KJE-D-LOAN_AMOUNT\' ><dt>Mortgage amount</dt><dd>Original or expected balance for your mortgage.</dd></div> <div id=\'KJE-D-TERM\' ><dt>Term in years</dt><dd>The number of years over which you will repay this loan. Common fixed-rate mortgage terms are 15, 20 and 30 years.</dd></div> <div id=\'KJE-D-ADJUSTABLE_RATE_INCR\' ><dt>Expected adjustment</dt><dd>The annual adjustment you expect in your ARM, after the initial period ends. The range for this calculator is minus 3% to plus 3%. Use a negative value if you believe interest rates will decrease, a positive value if you believe they will increase.</dd></div> <div id=\'KJE-D-INTEREST_RATE\' ><dt>Interest rate</dt><dd>Annual interest rate for each mortgage type. Typically an ARM will have a lower initial interest rate than a fixed-rate mortgage. Please note that the interest rate is different from the Annual Percentage Rate (APR), which includes other expenses such as mortgage insurance, and the origination fee and or point(s), which were paid when the mortgage was first originated. The APR is normally higher than the simple interest rate.</dd></div> <div id=\'KJE-D-ADJUSTABLE_MONTHS_FIXED\' ><dt>Months rate fixed</dt><dd>This is the number of months the rate is fixed for an ARM. During this period the interest rate and the monthly payment will remain fixed. The rate will then adjust annually by the amount entered in the "Expected Adjustment" field.</dd></div> <div id=\'KJE-D-ADJUSTABLE_RATE_CAP\' ><dt>Interest rate cap</dt><dd>This is the highest allowable interest rate for your mortgage. Your interest rate can never be adjusted above this rate.</dd></div> <div id=\'KJE-D-MONTHLY_PAYMENT\' ><dt>Monthly payment</dt><dd>Monthly principal and interest payment (PI) for the fixed-rate mortgage and the fully amortizing ARM.</dd></div> ';KJE.ReportText=' <!--HEADING "ARM vs. Fixed Rate Mortgage Results" HEADING--> <h2 class=\'KJEReportHeader KJEFontHeading\'>A Fully Amortizing ARM could save you an estimated SAVINGS_ARM_MONTH per month during the initial period.</h2> A LOAN_AMOUNT Fixed Rate Mortgage with a term of TERM years at INTEREST_RATE0 has a monthly payment of MONTHLY_PI0. If you were to finance this mortgage with a Fully Amortizing ARM at INTEREST_RATE1 the monthly payment would be MONTHLY_PI1, saving you SAVINGS_ARM_MONTH per month. <div class=KJEReportTableDiv><table class=KJEReportTable><caption class=\'KJEHeaderRow KJEHeading\'>ARM vs. Fixed Rate Mortgage</caption> <tbody class=\'KJEReportTBody\'> <tr class=KJEEvenRow><th class="KJELabel KJECellBorder KJECell50" scope=\'row\'>Initial savings on monthly payment</th><td class="KJECell KJECell50">SAVINGS_ARM_MONTH</td></tr> <tr class=KJEOddRow><th class="KJELabel KJECellBorder" scope=\'row\'>Payment savings first year</th><td class="KJECell">SAVINGS_ARM_FIRST_YEAR</td></tr> <tr class=KJEEvenRow><th class="KJELabel KJECellBorder" scope=\'row\'>Payment savings for MSG_FIVE years</th><td class="KJECell">SAVINGS_ARM_FIVE_YEAR</td></tr> </tbody> </table> </div> **GRAPH** BREAK_EVEN_NOTE <div class=KJEReportTableDiv><table class=KJEReportTable><caption class=\'KJEHeaderRow KJEHeading\'>Results Summary</caption> <thead class=\'KJEReportTHeader\'> <tr class=KJEHeaderRow><th class="KJEHeading KJECell40">&nbsp;</th><th class="KJEHeading KJECell30" scope=\'col\'>Fixed Rate Mortgage</th><th class="KJEHeading KJECell30" scope=\'col\'>Fully Amortizing ARM</th></tr> </thead> <tfoot class=\'KJEReportTFooter\'> <tr class=KJEFooterRow><th class="KJELabel KJECellBorder" scope=\'row\'>Total for TERM years of interest</th><td class="KJECellStrong KJECellBorder" >TOTAL_INTEREST0</td><td class="KJECellStrong" >TOTAL_INTEREST1</td></tr> <tr class=KJEFooterRow><th class="KJELabel KJECellBorder" scope=\'row\'>Total for TERM years of payments</th><td class="KJECellStrong KJECellBorder" >TOTAL_PAYMENTS0</td><td class="KJECellStrong" >TOTAL_PAYMENTS1</td></tr> </tfoot> <tbody class=\'KJEReportTBody\'> <tr class=KJEEvenRow><th class="KJELabel KJECellBorder KJECell40" scope=\'row\'>Loan amount</th><td class="KJECell KJECellBorder KJECell30" >LOAN_AMOUNT</td><td class="KJECell KJECell30" >LOAN_AMOUNT</td></tr> <tr class=KJEOddRow><th class="KJELabel KJECellBorder" scope=\'row\'>Term</th><td class="KJECell KJECellBorder" >TERM years</td><td class="KJECell" >TERM years</td></tr> <tr class=KJEEvenRow><th class="KJELabel KJECellBorder " VALIGN=top scope=\'row\'>Interest rate</th><td class="KJECell KJECellBorder" VALIGN=top>INTEREST_RATE0</td><td class="KJECell" VALIGN=top>INTEREST_RATE1<br>Rate is fixed for ADJUSTABLE_MONTHS_FIXED1 months and then is adjusted by ADJUSTABLE_RATE_INCR1 every ADJUSTABLE_RATE_FEQ1 months, up to a maximum of ADJUSTABLE_RATE_CAP1. The highest rate actually charged was HIGHEST_RATE1.</td></tr> <tr class=KJEOddRow><th class="KJELabel KJECellBorder" scope=\'row\'>Initial monthly payment</th><td class="KJECell KJECellBorder" >MONTHLY_PI0</td><td class="KJECell" >MONTHLY_PI1</td></tr> <tr class=KJEEvenRow><th class="KJELabel KJECellBorder" scope=\'row\'>MSG_FIVE_YEAR_PAYMENT</th><td class="KJECell KJECellBorder" >FIVE_YEAR_PAYMENT0</td><td class="KJECell" >FIVE_YEAR_PAYMENT1</td></tr> <tr class=KJEOddRow><th class="KJELabel KJECellBorder" scope=\'row\'><br>First year totals:</th><td class="KJECell KJECellBorder">&nbsp;</td><td class="KJECell">&nbsp;</td></tr> <tr class=KJEOddRow><td class="KJECell KJECellBorder" scope=\'row\'>&nbsp;&nbsp;Interest<br>&nbsp;&nbsp;Principal<br>&nbsp;&nbsp;Payments<br><br></td><td class="KJECell KJECellBorder" >FIRST_YEAR_INTEREST0<br>FIRST_YEAR_PRINCIPAL0<br>FIRST_YEAR_TOTAL0</td><td class="KJECell" >FIRST_YEAR_INTEREST1<br>FIRST_YEAR_PRINCIPAL1<br>FIRST_YEAR_TOTAL1</td></tr> <tr class=KJEEvenRow><th class="KJELabel KJECellBorder" scope=\'row\'><br>MSG_FIVE_YEAR_TOTALS:</th><td class="KJECell KJECellBorder">&nbsp;</td><td class="KJECell">&nbsp;</td></tr> <tr class=KJEEvenRow><td class="KJECell KJECellBorder" scope=\'row\'>&nbsp;&nbsp;Interest<br>&nbsp;&nbsp;Principal<br>&nbsp;&nbsp;Payments<br><br></td><td class="KJECell KJECellBorder" >FIVE_YEAR_INTEREST0<br>FIVE_YEAR_PRINCIPAL0<br>FIVE_YEAR_TOTAL0</td><td class="KJECell" >FIVE_YEAR_INTEREST1<br>FIVE_YEAR_PRINCIPAL1<br>FIVE_YEAR_TOTAL1</td></tr> </tbody> </table></div> <h2 class=\'KJEScheduleHeader KJEFontHeading\'>Payment Schedule</h2> **REPEATING GROUP** ';